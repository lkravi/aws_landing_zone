# Architecture Diagrams

## AWS Organization Structure

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         AWS ORGANIZATION (techcorp)                          │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                      ROOT (Management Account)                         │ │
│  │  • AWS Organizations Admin    • IAM Identity Center                    │ │
│  │  • Billing & Cost Management  • Organization CloudTrail                │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                        │
│     ┌───────────────────────────────┼───────────────────────────────┐       │
│     │                               │                               │       │
│     ▼                               ▼                               ▼       │
│ ┌─────────────┐             ┌─────────────────┐             ┌─────────────┐ │
│ │ SECURITY OU │             │ INFRASTRUCTURE  │             │ WORKLOADS   │ │
│ │             │             │      OU         │             │     OU      │ │
│ │ • Security  │             │ • Network Hub   │             │             │ │
│ │   Tooling   │             │ • Shared        │             │ ┌─────────┐ │ │
│ │ • Log       │             │   Services      │             │ │PROD OU  │ │ │
│ │   Archive   │             │                 │             │ │• Eng    │ │ │
│ │             │             │                 │             │ │• Data   │ │ │
│ └─────────────┘             └─────────────────┘             │ └─────────┘ │ │
│                                                             │ ┌─────────┐ │ │
│                                                             │ │NONPROD  │ │ │
│                                                             │ │• Dev    │ │ │
│                                                             │ │• Staging│ │ │
│                                                             │ └─────────┘ │ │
│                                                             │ ┌─────────┐ │ │
│                                                             │ │SANDBOX  │ │ │
│                                                             │ │• Eng    │ │ │
│                                                             │ └─────────┘ │ │
│                                                             └─────────────┘ │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Network Architecture (Hub-and-Spoke)

```
                                    ┌─────────────────┐
                                    │    INTERNET     │
                                    └────────┬────────┘
                                             │
                                    ┌────────▼────────┐
                                    │   EGRESS VPC    │
                                    │  ┌───────────┐  │
                                    │  │NAT Gateway│  │
                                    │  └───────────┘  │
                                    └────────┬────────┘
                                             │
           ┌─────────────────────────────────┼─────────────────────────────────┐
           │                                 │                                 │
           │                        ┌────────▼────────┐                        │
           │                        │ TRANSIT GATEWAY │                        │
           │                        │     (HUB)       │                        │
           │                        └────────┬────────┘                        │
           │                                 │                                 │
   ┌───────┴───────┐                ┌────────┴────────┐                ┌───────┴───────┐
   │               │                │                 │                │               │
┌──▼──────────┐ ┌──▼──────────┐ ┌───▼─────────┐ ┌────▼────────┐ ┌─────▼─────┐ ┌──────▼──────┐
│PRODUCTION   │ │ STAGING     │ │ DEVELOPMENT │ │ SANDBOX     │ │ SHARED    │ │ NETWORK     │
│ VPC         │ │ VPC         │ │ VPC         │ │ VPC         │ │ SERVICES  │ │ HUB         │
│             │ │             │ │             │ │             │ │ VPC       │ │             │
│10.100.0.0/16│ │10.101.0.0/16│ │10.102.0.0/16│ │10.200.0.0/16│ │10.0.0.0/16│ │             │
└─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ └───────────┘ └─────────────┘
```

## VPC Subnet Design

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           VPC: 10.X.0.0/16                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────┐ ┌─────────────────────┐ ┌─────────────────────┐   │
│  │    AZ-A (ap-se-2a)  │ │    AZ-B (ap-se-2b)  │ │    AZ-C (ap-se-2c)  │   │
│  │                     │ │                     │ │                     │   │
│  │ ┌─────────────────┐ │ │ ┌─────────────────┐ │ │ ┌─────────────────┐ │   │
│  │ │  PUBLIC /24     │ │ │ │  PUBLIC /24     │ │ │ │  PUBLIC /24     │ │   │
│  │ │ 10.X.0.0/24     │ │ │ │ 10.X.10.0/24    │ │ │ │ 10.X.20.0/24    │ │   │
│  │ │ • ALB           │ │ │ │ • ALB           │ │ │ │ • ALB           │ │   │
│  │ │ • NAT Gateway   │ │ │ │ • NAT Gateway   │ │ │ │ • NAT Gateway   │ │   │
│  │ └─────────────────┘ │ │ └─────────────────┘ │ │ └─────────────────┘ │   │
│  │                     │ │                     │ │                     │   │
│  │ ┌─────────────────┐ │ │ ┌─────────────────┐ │ │ ┌─────────────────┐ │   │
│  │ │  PRIVATE /22    │ │ │ │  PRIVATE /22    │ │ │ │  PRIVATE /22    │ │   │
│  │ │ 10.X.4.0/22     │ │ │ │ 10.X.20.0/22    │ │ │ │ 10.X.36.0/22    │ │   │
│  │ │ • EKS Nodes     │ │ │ │ • EKS Nodes     │ │ │ │ • EKS Nodes     │ │   │
│  │ │ • EC2 Instances │ │ │ │ • EC2 Instances │ │ │ │ • EC2 Instances │ │   │
│  │ │ • Containers    │ │ │ │ • Containers    │ │ │ │ • Containers    │ │   │
│  │ └─────────────────┘ │ │ └─────────────────┘ │ │ └─────────────────┘ │   │
│  │                     │ │                     │ │                     │   │
│  │ ┌─────────────────┐ │ │ ┌─────────────────┐ │ │ ┌─────────────────┐ │   │
│  │ │  DATABASE /24   │ │ │ │  DATABASE /24   │ │ │ │  DATABASE /24   │ │   │
│  │ │ 10.X.2.0/24     │ │ │ │ 10.X.12.0/24    │ │ │ │ 10.X.22.0/24    │ │   │
│  │ │ • RDS           │ │ │ │ • RDS           │ │ │ │ • RDS           │ │   │
│  │ │ • ElastiCache   │ │ │ │ • ElastiCache   │ │ │ │ • ElastiCache   │ │   │
│  │ └─────────────────┘ │ │ └─────────────────┘ │ │ └─────────────────┘ │   │
│  └─────────────────────┘ └─────────────────────┘ └─────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Security Services Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        SECURITY ARCHITECTURE                                 │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     MANAGEMENT ACCOUNT                                  │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐  │ │
│  │  │ Organization │ │   IAM        │ │ CloudTrail   │ │ AWS Config   │  │ │
│  │  │ CloudTrail   │ │ Identity     │ │ (Org Trail)  │ │ Aggregator   │  │ │
│  │  │              │ │ Center       │ │              │ │              │  │ │
│  │  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘  │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                        │
│                    Delegated Administration                                  │
│                                     │                                        │
│                                     ▼                                        │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                    SECURITY TOOLING ACCOUNT                             │ │
│  │  ┌──────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐  │ │
│  │  │ GuardDuty    │ │ Security Hub │ │ AWS Config   │ │ Inspector    │  │ │
│  │  │ (Delegated   │ │ (Aggregator) │ │ Rules        │ │              │  │ │
│  │  │  Admin)      │ │              │ │              │ │              │  │ │
│  │  └──────────────┘ └──────────────┘ └──────────────┘ └──────────────┘  │ │
│  │                                                                         │ │
│  │  ┌──────────────┐ ┌──────────────┐                                     │ │
│  │  │ EventBridge  │ │ SNS Topics   │  Alert Notifications               │ │
│  │  │ Rules        │ │ (Alerts)     │                                     │ │
│  │  └──────────────┘ └──────────────┘                                     │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                     │                                        │
│                              Centralized Logging                             │
│                                     │                                        │
│                                     ▼                                        │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │                     LOG ARCHIVE ACCOUNT                                 │ │
│  │  ┌────────────────────────────────────────────────────────────────┐   │ │
│  │  │                    S3 BUCKETS (Encrypted)                       │   │ │
│  │  │  • CloudTrail Logs    • VPC Flow Logs    • Config Snapshots    │   │ │
│  │  │  • GuardDuty Findings • Access Logs      • Application Logs    │   │ │
│  │  └────────────────────────────────────────────────────────────────┘   │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

## IAM Identity Center Access Flow

```
┌──────────────┐     ┌──────────────────────┐     ┌───────────────────────────┐
│              │     │   IAM Identity       │     │                           │
│    USER      │────▶│   Center Portal      │────▶│    AWS ACCOUNTS           │
│              │     │                      │     │                           │
└──────────────┘     │  ┌────────────────┐  │     │  ┌─────────────────────┐  │
                     │  │ GROUPS         │  │     │  │ Management          │  │
                     │  │                │  │     │  │  └─ Administrator    │  │
                     │  │ • Platform-    │  │     │  │  └─ Billing          │  │
                     │  │   Admins       │──┼────▶│  ├─────────────────────┤  │
                     │  │ • Security-    │  │     │  │ Security            │  │
                     │  │   Team         │  │     │  │  └─ Administrator    │  │
                     │  │ • Engineering- │  │     │  │  └─ SecurityAudit    │  │
                     │  │   Leads        │  │     │  ├─────────────────────┤  │
                     │  │ • Engineering- │  │     │  │ Development         │  │
                     │  │   Developers   │  │     │  │  └─ PowerUser       │  │
                     │  │ • DataScience- │  │     │  │  └─ Developer       │  │
                     │  │   Team         │  │     │  ├─────────────────────┤  │
                     │  │ • Finance-Team │  │     │  │ Production          │  │
                     │  │ • Auditors     │  │     │  │  └─ ReadOnly         │  │
                     │  │                │  │     │  │  └─ Administrator*   │  │
                     │  └────────────────┘  │     │  └─────────────────────┘  │
                     └──────────────────────┘     └───────────────────────────┘

                     * Emergency access only with approval
```

## Terraform Module Dependencies

```
                    ┌─────────────────────┐
                    │     BOOTSTRAP       │
                    │  • S3 State Bucket  │
                    │  • DynamoDB Locks   │
                    │  • KMS Key          │
                    └──────────┬──────────┘
                               │
                               ▼
                    ┌─────────────────────┐
                    │    ORGANIZATION     │
                    │  • AWS Org          │
                    │  • OUs              │
                    │  • SCPs             │
                    │  • Accounts         │
                    └──────────┬──────────┘
                               │
              ┌────────────────┼────────────────┐
              │                │                │
              ▼                ▼                ▼
    ┌─────────────────┐ ┌────────────────┐ ┌──────────────────┐
    │ IDENTITY-CENTER │ │   SECURITY     │ │    NETWORK       │
    │ • Permission    │ │ • CloudTrail   │ │ • VPC            │
    │   Sets          │ │ • GuardDuty    │ │ • Transit GW     │
    │ • Groups        │ │ • Config       │ │ • VPC Endpoints  │
    │ • Assignments   │ │ • Security Hub │ │                  │
    └─────────────────┘ └────────────────┘ └──────────────────┘
```

---

*These diagrams use ASCII art for maximum compatibility. For production documentation, consider using tools like draw.io, Lucidchart, or AWS Architecture Icons.*
